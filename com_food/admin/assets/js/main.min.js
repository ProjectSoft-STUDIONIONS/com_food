!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(n){return function(n,r){var o,a,i,s,l,c,p,u,f,d=1,m=n.length,g="";for(a=0;a<m;a++)if("string"==typeof n[a])g+=n[a];else if("object"==typeof n[a]){if((s=n[a]).keys)for(o=r[d],i=0;i<s.keys.length;i++){if(null==o)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[i],s.keys[i-1]));o=o[s.keys[i]]}else o=s.param_no?r[s.param_no]:r[d++];if(e.not_type.test(s.type)&&e.not_primitive.test(s.type)&&o instanceof Function&&(o=o()),e.numeric_arg.test(s.type)&&"number"!=typeof o&&isNaN(o))throw new TypeError(t("[sprintf] expecting number but found %T",o));switch(e.number.test(s.type)&&(u=o>=0),s.type){case"b":o=parseInt(o,10).toString(2);break;case"c":o=String.fromCharCode(parseInt(o,10));break;case"d":case"i":o=parseInt(o,10);break;case"j":o=JSON.stringify(o,null,s.width?parseInt(s.width):0);break;case"e":o=s.precision?parseFloat(o).toExponential(s.precision):parseFloat(o).toExponential();break;case"f":o=s.precision?parseFloat(o).toFixed(s.precision):parseFloat(o);break;case"g":o=s.precision?String(Number(o.toPrecision(s.precision))):parseFloat(o);break;case"o":o=(parseInt(o,10)>>>0).toString(8);break;case"s":o=String(o),o=s.precision?o.substring(0,s.precision):o;break;case"t":o=String(!!o),o=s.precision?o.substring(0,s.precision):o;break;case"T":o=Object.prototype.toString.call(o).slice(8,-1).toLowerCase(),o=s.precision?o.substring(0,s.precision):o;break;case"u":o=parseInt(o,10)>>>0;break;case"v":o=o.valueOf(),o=s.precision?o.substring(0,s.precision):o;break;case"x":o=(parseInt(o,10)>>>0).toString(16);break;case"X":o=(parseInt(o,10)>>>0).toString(16).toUpperCase()}e.json.test(s.type)?g+=o:(!e.number.test(s.type)||u&&!s.sign?f="":(f=u?"+":"-",o=o.toString().replace(e.sign,"")),c=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",p=s.width-(f+o).length,l=s.width&&p>0?c.repeat(p):"",g+=s.align?f+o+l:"0"===c?f+l+o:l+f+o)}return g}(function(t){if(r[t])return r[t];var n,o=t,a=[],i=0;for(;o;){if(null!==(n=e.text.exec(o)))a.push(n[0]);else if(null!==(n=e.modulo.exec(o)))a.push("%");else{if(null===(n=e.placeholder.exec(o)))throw new SyntaxError("[sprintf] unexpected placeholder");if(n[2]){i|=1;var s=[],l=n[2],c=[];if(null===(c=e.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(c[1]);""!==(l=l.substring(c[0].length));)if(null!==(c=e.key_access.exec(l)))s.push(c[1]);else{if(null===(c=e.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(c[1])}n[2]=s}else i|=2;if(3===i)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");a.push({placeholder:n[0],param_no:n[1],keys:n[2],sign:n[3],pad_char:n[4],align:n[5],width:n[6],precision:n[7],type:n[8]})}o=o.substring(n[0].length)}return r[t]=a}(n),arguments)}function n(e,n){return t.apply(null,[e].concat(n||[]))}var r=Object.create(null);"undefined"!=typeof exports&&(exports.sprintf=t,exports.vsprintf=n),"undefined"!=typeof window&&(window.sprintf=t,window.vsprintf=n,"function"==typeof define&&define.amd&&define(function(){return{sprintf:t,vsprintf:n}}))}(),function(e){const t=e.noConflict(!0);let n=location.search.replace(/\?/g,"").split("&").map((e,t,n)=>{return e.split("=")});const r=Object.fromEntries(n),o=parseInt(window.MAX_COUNT_FILE),a=function(){let t=document.form_mode,n=e("input[name=mode]",t)[0],r=e("input[name=file]",t)[0],o=e("input[name=new_file]",t)[0];n.value="",r.value="",o.value="",t.reset()},i=function(e,t,n){let r=-1;for(n||0===n||(n=" "),t-=(e=String(e)).length;++r<t;)e=n+e;return e};if(window.uploadFiles=function(e){let n=t("#p_uploads"),r=[...e.files],a=[];if(r.length>o)return alert(`\u041d\u0435\u043b\u044c\u0437\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 ${o} \u0444\u0430\u0439\u043b\u043e\u0432`),document.upload.reset(),!1;for(let e of r){let t;if(null!==(t=/[^.]+$/.exec(e.name))){let r=t[0].toLowerCase();if("xlsx"!=r&&"pdf"!=r)return n.html(""),alert(`\u041d\u0435\u043b\u044c\u0437\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u0438\u043f \u0444\u0430\u0439\u043b\u0430!\n${e.name} - ${e.type}`),document.upload.reset(),!1;a.push(e.name)}}return n.html(a.join("<br>")),!1},window.modeFile=function(t){let n=e(t).data("mode"),r=e(t).data("file"),o=document.form_mode,i=e("input[name=mode]",o)[0],s=e("input[name=file]",o)[0],l=e("input[name=new_file]",o)[0];switch(n){case"rename":const[...e]=r.split("."),t=e.pop();let c=e.join("."),p=prompt(sprintf(window.com_food_lang.COM_FOOD_RENAME_QUAERE,r),c);if(!p)return a(),!1;if(/[^A-z0-9-._]+/.test(p))return alert(window.com_food_lang.COM_FOOD_RENAME_ERROR+"!"),a(),!1;i.value=n,s.value=r,l.value=p+`.${t}`,s.value!=l.value?o.submit():a();break;case"delete":confirm(sprintf(window.com_food_lang.COM_FOOD_DELETE_QUAERE,r))&&(i.value=n,s.value=r,o.submit())}},r.dir)new DataTable(".food-table .table",{columns:[{name:"file"},{name:"permission"},{name:"date"},{name:"size"},{name:"actions"}],columnDefs:[{searchable:!1,targets:[1,2,3,4]}],ordering:!1,stateSave:!0,stateSaveCallback:function(e,t){localStorage.setItem("DataTables_"+e.sInstance+"_"+r.dir,JSON.stringify(t))},stateLoadCallback:function(e){return JSON.parse(localStorage.getItem("DataTables_"+e.sInstance+"_"+r.dir))},lengthMenu:[[10,25,50,100,-1],["\u043f\u043e 10","\u043f\u043e 25","\u043f\u043e 50","\u043f\u043e 100","\u0412\u0441\u0435"]],layout:{topStart:["pageLength","search"],topEnd:{buttons:[{extend:"excel",text:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0432 XLSX",className:"",customize:function(...e){console.log(e)},action:function(e,t,n,r,o){DataTable.ext.buttons.excelHtml5.action.call(this,e,t,n,r,o)}},{extend:"pdf",text:"\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0432 PDF",className:"",download:"",customize:function(e){console.log(e);let t=["\u041c\u0435\u043d\u044e \u0435\u0436\u0435\u0434\u043d\u0435\u0432\u043d\u043e\u0433\u043e \u043f\u0438\u0442\u0430\u043d\u0438\u044f.",`\u0414\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u044f ${location.origin}/${r.dir}/`];e.language="ru-RU",e.info={title:t.join(" "),author:location.origin,subject:t.join(" "),keywords:t.join(" "),creator:"\u041a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u043f\u0438\u0442\u0430\u043d\u0438\u044f \u0434\u043b\u044f Joomla CMS"},e.header={columns:[{text:`${location.origin}/${r.dir}/`,margin:[15,15,15,15],alignment:"left"},{text:function(e=0){let t=new Date(e),n=t.getDate(),r=t.getMonth()+1,o=t.getFullYear(),a=t.getHours(),s=t.getMinutes(),l=t.getSeconds(),c=[i(n,2,"0"),i(r,2,"0"),String(o)],p=[i(a,2,"0"),i(s,2,"0"),i(l,2,"0")];return c.join("-")+" "+p.join(":")}((new Date).getTime()),margin:[15,15,15,15],alignment:"right"}]},e.footer=function(e,t){return[{text:e.toString()+" \u0438\u0437 "+t,margin:[15,15,15,15],alignment:"center"}]},e.content[0].text=t.join("\r\n")},action:function(e,t,n,r,o){DataTable.ext.buttons.pdfHtml5.action.call(this,e,t,n,r,o)}}]}},language:{url:"/administrator/components/com_food/assets/js/ru_RU.json"}})}(jQuery);