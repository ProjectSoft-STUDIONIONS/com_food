!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(t){return function(t,r){var i,o,a,s,p,l,c,u,f,d=1,m=t.length,_="";for(o=0;o<m;o++)if("string"==typeof t[o])_+=t[o];else if("object"==typeof t[o]){if((s=t[o]).keys)for(i=r[d],a=0;a<s.keys.length;a++){if(null==i)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[a],s.keys[a-1]));i=i[s.keys[a]]}else i=s.param_no?r[s.param_no]:r[d++];if(e.not_type.test(s.type)&&e.not_primitive.test(s.type)&&i instanceof Function&&(i=i()),e.numeric_arg.test(s.type)&&"number"!=typeof i&&isNaN(i))throw new TypeError(n("[sprintf] expecting number but found %T",i));switch(e.number.test(s.type)&&(u=i>=0),s.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,s.width?parseInt(s.width):0);break;case"e":i=s.precision?parseFloat(i).toExponential(s.precision):parseFloat(i).toExponential();break;case"f":i=s.precision?parseFloat(i).toFixed(s.precision):parseFloat(i);break;case"g":i=s.precision?String(Number(i.toPrecision(s.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=s.precision?i.substring(0,s.precision):i;break;case"t":i=String(!!i),i=s.precision?i.substring(0,s.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=s.precision?i.substring(0,s.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=s.precision?i.substring(0,s.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}e.json.test(s.type)?_+=i:(!e.number.test(s.type)||u&&!s.sign?f="":(f=u?"+":"-",i=i.toString().replace(e.sign,"")),l=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",c=s.width-(f+i).length,p=s.width&&c>0?l.repeat(c):"",_+=s.align?f+i+p:"0"===l?f+p+i:p+f+i)}return _}(function(n){if(r[n])return r[n];var t,i=n,o=[],a=0;for(;i;){if(null!==(t=e.text.exec(i)))o.push(t[0]);else if(null!==(t=e.modulo.exec(i)))o.push("%");else{if(null===(t=e.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){a|=1;var s=[],p=t[2],l=[];if(null===(l=e.key.exec(p)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(l[1]);""!==(p=p.substring(l[0].length));)if(null!==(l=e.key_access.exec(p)))s.push(l[1]);else{if(null===(l=e.index_access.exec(p)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(l[1])}t[2]=s}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:t[0],param_no:t[1],keys:t[2],sign:t[3],pad_char:t[4],align:t[5],width:t[6],precision:t[7],type:t[8]})}i=i.substring(t[0].length)}return r[n]=o}(t),arguments)}function t(e,t){return n.apply(null,[e].concat(t||[]))}var r=Object.create(null);"undefined"!=typeof exports&&(exports.sprintf=n,exports.vsprintf=t),"undefined"!=typeof window&&(window.sprintf=n,window.vsprintf=t,"function"==typeof define&&define.amd&&define(function(){return{sprintf:n,vsprintf:t}}))}(),function(e){const n=e.noConflict(!0),t=parseInt(window.MAX_COUNT_FILE),r=function(){let n=document.form_mode,t=e("input[name=mode]",n)[0],r=e("input[name=file]",n)[0],i=e("input[name=new_file]",n)[0];t.value="",r.value="",i.value="",n.reset()};window.uploadFiles=function(e){let r=n("#p_uploads"),i=[...e.files],o=[];if(i.length>t)return alert(`\u041d\u0435\u043b\u044c\u0437\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 ${t} \u0444\u0430\u0439\u043b\u043e\u0432`),document.upload.reset(),!1;for(let e of i){let n;if(null!==(n=/[^.]+$/.exec(e.name))){let t=n[0].toLowerCase();if("xlsx"!=t&&"pdf"!=t)return r.html(""),alert(`\u041d\u0435\u043b\u044c\u0437\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u0438\u043f \u0444\u0430\u0439\u043b\u0430!\n${e.name} - ${e.type}`),document.upload.reset(),!1;o.push(e.name)}}return r.html(o.join("<br>")),!1},window.modeFile=function(n){let t=e(n).data("mode"),i=e(n).data("file"),o=document.form_mode,a=e("input[name=mode]",o)[0],s=e("input[name=file]",o)[0],p=e("input[name=new_file]",o)[0];switch(t){case"rename":const[...e]=i.split("."),n=e.pop();let l=e.join("."),c=prompt(sprintf(window.com_food_lang.COM_FOOD_RENAME_QUAERE,i),l);if(!c)return r(),!1;if(/[^A-z0-9-._]+/.test(c))return alert(window.com_food_lang.COM_FOOD_RENAME_ERROR+"!"),r(),!1;a.value=t,s.value=i,p.value=c+`.${n}`,s.value!=p.value?o.submit():r();break;case"delete":confirm(sprintf(window.com_food_lang.COM_FOOD_DELETE_QUAERE,i))&&(a.value=t,s.value=i,o.submit())}}}(jQuery);